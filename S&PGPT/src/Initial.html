<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S&PGPT - AI for SEC Expertise</title>
    <link rel="stylesheet" href="css/styling.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <h1 class="sp-gpt">S&PGPT</h1>
        <nav class="nav-bar">
            <button class="login" onclick="openloginPopup();">LOG IN</button>
            <button class="signup" onclick="opensignupPopup();">SIGN UP</button>
            <!-- <button onclick="clearUsername()" class="logout-btn">Log Out</button> -->
        </nav>
    </header>

    <main>
        <div class="query-buttons">
            <h1 class="highlight">Your AI-powered resource for SEC Expertise.</h1>
            <button onclick="openloginPopup();">How has Microsoft’s Revenue changed over the last five years?</button>
            <button onclick="openloginPopup();">Summarize Amazon’s AWS growth from its most recent 10-Q report.</button>
            <button onclick="openloginPopup();">What are the key numbers in Meta's 10-K?</button>
            <button onclick="openloginPopup();">Breakdown Apple’s assets from 2023.</button>
        </div>

        <div class="search-bar">
            <input type="text" placeholder="Message S&PGPT" onclick="openloginPopup();">
            <button onclick="openloginPopup();" class="search-icon"><i class="fas fa-search"></i></button>
            <!-- <button class="search-icon"><i class="fas fa-search"></i></button> -->
        </div>

        <!-- The Popup -->
        <div id="loginPopup" class="popup">
            <!-- Popup content -->
            <div class="popup-content">
                <h2>Log In</h2>
                <span class="close" onclick="closeloginPopup();">&times;</span>
                <p>Don't have an account? <a href="#" onclick="event.preventDefault(); opensignupPopup();">Sign Up</a></p>
                <form onsubmit="saveUsername(event)">
                  <label for="email">Email:</label>
                  <input type="email" id="email" name="email" required><br><br>
                  <label for="password">Password:</label>
                  <input type="password" id="password" name="password" required><br><br>
                  <button type="submit">Submit</button>
              </form>
            </div>
        </div>

         <!-- The Popup -->
         <div id="signupPopup" class="popup">
            <!-- Popup content -->
            <div class="popup-content">
                <h2>Sign Up</h2>
                <span class="close" onclick="closesignupPopup();">&times;</span>
                <p>Already have an account? <a href="#" onclick="event.preventDefault(); openloginPopup();">Log In</a></p>
                <form onsubmit="saveUsername(event)">
                  <label for="email">Email:</label>
                  <input type="email" id="email" name="email" required><br><br>
                  <label for="password">Password:</label>
                  <input type="password" id="password" name="password" required><br><br>
                  <button type="submit">Submit</button>
              </form>
            </div>
        </div>
    </main>

    <script>
        // Function to open the popup
        function openloginPopup() {
            closesignupPopup(); // Close signup popup
            document.getElementById("loginPopup").style.display = "flex";
        }

        // Function to close the popup
        function closeloginPopup() {
            document.getElementById("loginPopup").style.display = "none";
        }

        // Function to open the popup
        function opensignupPopup() {
            closeloginPopup(); // Close login popup
            document.getElementById("signupPopup").style.display = "flex";
        }

        // Function to close the popup
        function closesignupPopup() {
            document.getElementById("signupPopup").style.display = "none";
        }

        function saveUsername(event) {
            event.preventDefault();

            // Determine which popup form was submitted
            let loginEmail = document.querySelector("#loginPopup input[type='email']");
            let signupEmail = document.querySelector("#signupPopup input[type='email']");

            let email = loginEmail?.value || signupEmail?.value; // Get email from either form
            if (!email) return; // Stop execution if no email is found

            const username = email.substring(0, email.indexOf('@'));

            localStorage.setItem("username", username); // Store username

            // Close relevant popups
            closeloginPopup();
            closesignupPopup();

            // Redirect to General Finance Mode
            window.location.href = "learningmode.html";
        }

    </script>
</body>
</html>